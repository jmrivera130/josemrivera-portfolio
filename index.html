<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jose M Rivera - UX Designer Portfolio</title>

  <!-- Tailwind CDN (we'll purge later) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:700&display=swap" rel="stylesheet" />

  <style>
    :root { --accent:#38bdf8; --bg:#111827; --fg:#e5e7eb; }
    body { font-family:'Inter', sans-serif; background:var(--bg); color:var(--fg); }
    .font-serif { font-family:'Playfair Display', serif; }
    .glass-effect { background:rgba(31,41,55,.5); backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,.1); }
    .accent-color{ color:var(--accent);} .accent-bg{background:var(--accent);} .accent-border{border-color:var(--accent);}    
    #case-study-overlay{ position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(17,24,39,.95); backdrop-filter:blur(15px); z-index:60; overflow-y:auto; -webkit-overflow-scrolling:touch; padding:80px 0 20px; }
  </style>
</head>
<body class="antialiased">

  <!--
    ——— Your entire HEADER, MAIN (home/work/about/process/contact),
      and FOOTER content goes here exactly as before.
  -->

  <script>
    // —— Mobile menu toggle —— 
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
      mobileMenu.querySelectorAll('a').forEach(link =>
        link.addEventListener('click', () => mobileMenu.classList.add('hidden'))
      );
    }

    // —— Core elements —— 
    const portfolioSections    = document.getElementById('portfolio-sections');
    const caseStudySection     = document.getElementById('case-study-overlay');
    const viewCaseStudyButtons = document.querySelectorAll('.view-case-study-btn');
    const backToPortfolioLinks = document.querySelectorAll('#back-to-portfolio-overlay, #home-link-header');

    let lastFocusedElement = null;

    // —— Data for case studies —— 
    const projectsData = {
      /* your project1, project2, project3 objects exactly as before */
    };

    // —— Helpers —— 
    function populateList(ul, items, formatter) {
      ul.innerHTML = '';
      items.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = formatter(item);
        ul.appendChild(li);
      });
    }

    function showPortfolio() {
      portfolioSections?.classList.remove('hidden');
      caseStudySection?.classList.add('hidden');
      document.body.style.overflow = '';
      if (lastFocusedElement) lastFocusedElement.focus();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showCaseStudy(projectId) {
      const project = projectsData[projectId];
      if (!project || !portfolioSections || !caseStudySection) return;

      // fill in all the fields:
      document.getElementById('case-study-title').textContent       = project.title;
      document.getElementById('case-study-tagline').textContent     = project.tagline;
      document.getElementById('case-study-hero-image').src          = project.heroImage;
      document.getElementById('case-study-overview-text').textContent = project.overview;
      document.getElementById('case-study-role').textContent        = project.role;
      document.getElementById('case-study-timeline').textContent    = project.timeline;
      document.getElementById('case-study-tools').textContent       = project.tools;
      document.getElementById('case-study-problem-text').textContent    = project.problem;
      document.getElementById('case-study-problem-statement').textContent = project.problemStatement;

      populateList(
        document.getElementById('case-study-findings-list'),
        project.findings,
        f => `<strong>${f.title}:</strong> ${f.body}`
      );

      document.getElementById('case-study-research-image').src      = project.researchImage;
      document.getElementById('case-study-design-intro').textContent = project.designIntro;
      document.getElementById('case-study-wireframe-image').src     = project.wireframeImage;
      document.getElementById('case-study-mockup-image').src        = project.mockupImage;

      document.getElementById('case-study-decisions-intro').textContent = project.decisionsIntro || '';
      populateList(
        document.getElementById('case-study-decisions-list'),
        project.decisions,
        d => d
      );

      document.getElementById('case-study-metric1-value').textContent = project.metric1Value;
      document.getElementById('case-study-metric1-label').textContent = project.metric1Label;
      document.getElementById('case-study-metric2-value').textContent = project.metric2Value;
      document.getElementById('case-study-metric2-label').textContent = project.metric2Label;
      document.getElementById('case-study-metric3-value').textContent = project.metric3Value;
      document.getElementById('case-study-metric3-label').textContent = project.metric3Label;
      document.getElementById('case-study-lessons-learned').textContent = project.lessonsLearned;

      const protoWrap = document.getElementById('clockwork-prototype-text-link-container');
      const protoLink = document.getElementById('clockwork-prototype-text-link');
      if (project.prototypeTextLink) {
        protoLink.href = project.prototypeTextLink;
        protoLink.textContent = project.prototypeTextLinkLabel || 'View Interactive Prototype';
        protoWrap.classList.remove('hidden');
      } else {
        protoWrap.classList.add('hidden');
      }

      lastFocusedElement = document.activeElement;
      portfolioSections.classList.add('hidden');
      caseStudySection.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      caseStudySection.setAttribute('tabindex','-1');
      caseStudySection.focus();
    }

    // —— Event listeners —— 
    viewCaseStudyButtons.forEach(btn =>
      btn.addEventListener('click', e => {
        e.preventDefault();
        showCaseStudy(e.currentTarget.dataset.projectId);
      })
    );

    backToPortfolioLinks.forEach(link =>
      link.addEventListener('click', e => {
        e.preventDefault();
        showPortfolio();
        if (link.hash) {
          setTimeout(() => {
            const target = document.querySelector(link.hash);
            if (target) target.scrollIntoView({ behavior: 'smooth' });
          }, 100);
        }
      })
    );

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && !caseStudySection.classList.contains('hidden')) {
        showPortfolio();
      }
    });

    // —— Initialize —— 
    window.addEventListener('load', showPortfolio);
  </script>
</body>
</html>

